# ๐ ูุธุงู ุงูุตูุงุญูุงุช ูุงูุฑููุฒ - Ajza App

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุธุงู ูุณุชุฎุฏู ููุชุจุฉ **Spatie Laravel Permission** ูุฅุฏุงุฑุฉ ุงูุฑููุฒ ูุงูุตูุงุญูุงุช ูู ุชุทุจูู Ajza.

## ๐ฏ ุงูุฑููุฒ ุงููุชุงุญุฉ

### 1. **Admin** - ูุฏูุฑ ุงููุธุงู
- ูููู ุฌููุน ุงูุตูุงุญูุงุช
- ููููู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงููุชุงุฌุฑ ูุงูููุชุฌุงุช

### 2. **Supplier** - ุงูููุฑุฏ
- ููููู ุฅุฏุงุฑุฉ ูุชุงุฌุฑู ูููุชุฌุงุชู
- ููููู ุนุฑุถ ููุจูู ุงูุทูุจุงุช
- ููููู ุฅุฏุงุฑุฉ ุงูุนุฑูุถ

### 3. **Client** - ุงูุนููู
- ููููู ุชุตูุญ ุงูููุชุฌุงุช
- ููููู ุนูู ุงูุทูุจุงุช
- ููููู ุฅุฏุงุฑุฉ ุญุณุงุจุงุชู

### 4. **Workshop** - ุงููุฑุดุฉ
- ููููู ุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุฅุตูุงุญ
- ููููู ุงูุชูุงุตู ูุน ุงูุนููุงุก

### 5. **Representative** - ุงูููุซู
- ููููู ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- ููููู ุงูุชูุงุตู ูุน ุงูุนููุงุก

## ๐ ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ

### ุตูุงุญูุงุช ุงูููุฑุฏ (Supplier):
- `show-all-permissions` - ุนุฑุถ ุฌููุน ุงูุตูุงุญูุงุช
- `view-orders` - ุนุฑุถ ุงูุทูุจุงุช
- `accept-orders` - ูุจูู ุงูุทูุจุงุช
- `view-offers` - ุนุฑุถ ุงูุนุฑูุถ
- `control-offer` - ุงูุชุญูู ูู ุงูุนุฑุถ
- `view-users` - ุนุฑุถ ุงููุณุชุฎุฏููู
- `edit-users` - ุชุนุฏูู ุงููุณุชุฎุฏููู
- `view-stores` - ุนุฑุถ ุงููุชุงุฌุฑ
- `edit-stores` - ุชุนุฏูู ุงููุชุงุฌุฑ
- `view-categories` - ุนุฑุถ ุงููุฆุงุช
- `edit-categories` - ุชุนุฏูู ุงููุฆุงุช
- `view-products` - ุนุฑุถ ุงูููุชุฌุงุช
- `edit-products` - ุชุนุฏูู ุงูููุชุฌุงุช
- `view-orders-statistics` - ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูุทูุจุงุช

### ุตูุงุญูุงุช ุงููุฏูุฑ (Admin):
- `a.show-all-users` - ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู
- `a.control-user` - ุงูุชุญูู ูู ุงููุณุชุฎุฏู
- `a.show-all-stores` - ุนุฑุถ ุฌููุน ุงููุชุงุฌุฑ
- `a.control-store` - ุงูุชุญูู ูู ุงููุชุฌุฑ
- `a.show-all-repSales` - ุนุฑุถ ุฌููุน ููุฏูุจู ุงููุจูุนุงุช
- `a.control-repSales` - ุงูุชุญูู ูู ููุฏูุจู ุงููุจูุนุงุช
- `a.show-all-promos` - ุนุฑุถ ุฌููุน ุงูุฑููุฒ ุงูุชุฑููุฌูุฉ
- `a.control-promo` - ุงูุชุญูู ูู ุงูุฑูุฒ ุงูุชุฑููุฌู
- `a.show-all-products` - ุนุฑุถ ุฌููุน ุงูููุชุฌุงุช
- `a.control-product` - ุงูุชุญูู ูู ุงูููุชุฌ
- `a.show-all-states` - ุนุฑุถ ุฌููุน ุงูููุงูุงุช
- `a.control-state` - ุงูุชุญูู ูู ุงูููุงูุฉ
- `a.show-all-offers` - ุนุฑุถ ุฌููุน ุงูุนุฑูุถ
- `a.control-offers` - ุงูุชุญูู ูู ุงูุนุฑูุถ
- `a.show-all-chat` - ุนุฑุถ ุฌููุน ุงููุญุงุฏุซุงุช
- `a.control-chat` - ุงูุชุญูู ูู ุงููุญุงุฏุซุฉ

## ๐๏ธ ุงูุฃูุงูุฑ ุงููุชุงุญุฉ

### 1. ุนุฑุถ ุฌููุน ุงูุฑููุฒ ูุงูุตูุงุญูุงุช:
```bash
php artisan permissions:list
```

### 2. ุงูุชุญูู ูู ุตูุงุญูุงุช ูุณุชุฎุฏู ูุนูู:
```bash
php artisan user:check-permissions +966550506713
```

### 3. ุฅุถุงูุฉ ุฑูู ููุณุชุฎุฏู:
```bash
php artisan user:assign-role +966550506713 Supplier
```

### 4. ุฅุถุงูุฉ ุตูุงุญูุฉ ููุณุชุฎุฏู:
```bash
php artisan user:assign-permission +966550506713 view-orders
```

### 5. ุชูุนูู ุญุณุงุจ ูุณุชุฎุฏู:
```bash
php artisan user:activate +966550506713
```

## ๐ ุชุดุฎูุต ูุดุงูู ุชุณุฌูู ุงูุฏุฎูู

### ุงููุดุงูู ุงูุดุงุฆุนุฉ:

#### 1. **ุงููุณุชุฎุฏู ูุง ูุณุชุทูุน ุชุณุฌูู ุงูุฏุฎูู**
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- `is_active = false`
- `is_registered = false`
- `deletion_status != 'active'`
- ูุง ููุฌุฏ ุฑูู ูุฎุตุต ูููุณุชุฎุฏู
- ูุง ุชูุฌุฏ ุตูุงุญูุงุช ูุฎุตุตุฉ

**ุงูุญู:**
```bash
# ุชูุนูู ุงููุณุชุฎุฏู
php artisan user:activate +966550506713

# ุฅุถุงูุฉ ุฑูู
php artisan user:assign-role +966550506713 Supplier

# ุฅุถุงูุฉ ุตูุงุญูุงุช
php artisan user:assign-permission +966550506713 show-all-permissions
```

#### 2. **ุงููุณุชุฎุฏู ูุง ูููู ุตูุงุญูุงุช ูุงููุฉ**
**ุงูุญู:**
```bash
# ุฅุถุงูุฉ ุตูุงุญูุงุช ุฅุถุงููุฉ
php artisan user:assign-permission +966550506713 view-orders
php artisan user:assign-permission +966550506713 accept-orders
```

#### 3. **ุงููุณุชุฎุฏู ูุญุฐูู ุฃู ูุนูู**
**ุงูุญู:**
```bash
# ุฅุนุงุฏุฉ ุชูุนูู ุงูุญุณุงุจ
php artisan user:activate +966550506713
```

## ๐ ูุญุต ุญุงูุฉ ุงููุณุชุฎุฏู

```bash
php artisan user:check-permissions +966550506713
```

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ:**
```
User Information:
ID: 123
Name: ุงุณู ุงููุณุชุฎุฏู
Email: user@example.com
Mobile: +966550506713
Is Active: Yes
Is Registered: Yes
Deletion Status: active

Roles:
- Supplier

Permissions through Roles:
- show-all-permissions
- view-orders
- accept-orders
- view-offers

โ User can login successfully
```

## ๐ ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ ูุน ุตูุงุญูุงุช

### 1. ุฅูุดุงุก ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
### 2. ุชูุนูู ุงูุญุณุงุจ:
```bash
php artisan user:activate +966550506713
```

### 3. ุฅุถุงูุฉ ุฑูู:
```bash
php artisan user:assign-role +966550506713 Supplier
```

### 4. ุฅุถุงูุฉ ุตูุงุญูุงุช:
```bash
php artisan user:assign-permission +966550506713 show-all-permissions
php artisan user:assign-permission +966550506713 view-orders
php artisan user:assign-permission +966550506713 accept-orders
```

## ๐ง Middleware ุงููุชุงุญุฉ

### 1. **check.role** - ุงูุชุญูู ูู ุงูุฑูู:
```php
Route::middleware(['auth:sanctum', 'check.role:Supplier'])->group(function () {
    // Routes for Supplier role only
});
```

### 2. **check.permissions** - ุงูุชุญูู ูู ุงูุตูุงุญูุงุช:
```php
Route::middleware(['auth:sanctum', 'check.permissions:view-orders'])->group(function () {
    // Routes that require view-orders permission
});
```

### 3. **role** - Spatie Permission middleware:
```php
Route::middleware(['auth:sanctum', 'role:Supplier'])->group(function () {
    // Routes for Supplier role
});
```

### 4. **permission** - Spatie Permission middleware:
```php
Route::middleware(['auth:sanctum', 'permission:view-orders'])->group(function () {
    // Routes that require view-orders permission
});
```

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุฌููุน ุงูุฑููุฒ ุชุณุชุฎุฏู guard 'api'**
2. **ุงูุตูุงุญูุงุช ูุฑุชุจุทุฉ ุจุงูุฑููุฒ**
3. **ุงููุณุชุฎุฏู ูููู ุฃู ูููู ูู ุฃูุซุฑ ูู ุฑูู**
4. **ุงูุตูุงุญูุงุช ูููู ุฅุถุงูุชูุง ูุจุงุดุฑุฉ ูููุณุชุฎุฏู ุฃู ูู ุฎูุงู ุงูุฑููุฒ**
5. **ูุธุงู ุชุณุฌูู ุงูุฏุฎูู ูุชุญูู ูู:**
   - `is_active = true`
   - `is_registered = true`
   - `deletion_status = 'active'`
   - ูุฌูุฏ ุฑูู ูุงุญุฏ ุนูู ุงูุฃูู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ุชุนูู ุงูุฃูุงูุฑ:
1. ุชุฃูุฏ ูู ุชุดุบูู `php artisan config:clear`
2. ุชุฃูุฏ ูู ุชุดุบูู `php artisan cache:clear`
3. ุชุฃูุฏ ูู ูุฌูุฏ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. ุชุญูู ูู ุณุฌูุงุช ุงูุฃุฎุทุงุก ูู `storage/logs/laravel.log`

### ุฅุฐุง ูู ูุนูู ุชุณุฌูู ุงูุฏุฎูู:
1. ุงุณุชุฎุฏู `php artisan user:check-permissions {mobile}` ููุญุต ุงูุญุงูุฉ
2. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ููุนู
3. ุชุฃูุฏ ูู ูุฌูุฏ ุฑูู ูุฎุตุต
4. ุชุฃูุฏ ูู ูุฌูุฏ ุตูุงุญูุงุช ูุฎุตุตุฉ
